<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Matematika Interaktif</title>
    <!-- Tailwind CSS untuk styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts: Poppins untuk kesan lebih modern dan playful -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        
        /* Custom Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .glass-input {
            background: rgba(243, 244, 246, 0.8);
            transition: all 0.3s ease;
        }
        .glass-input:focus {
            background: #ffffff;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
        }

        /* Gradient Text */
        .text-gradient {
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-image: linear-gradient(to right, #4f46e5, #9333ea);
        }
    </style>
</head>
<body class="bg-[url('https://images.unsplash.com/photo-1557683316-973673baf926?q=80&w=2029&auto=format&fit=crop')] bg-cover bg-center bg-fixed min-h-screen text-gray-800 antialiased selection:bg-indigo-200 selection:text-indigo-900">
    
    <!-- Overlay Gradient agar teks tetap terbaca -->
    <div class="fixed inset-0 bg-gradient-to-br from-indigo-900/90 via-purple-900/80 to-blue-900/90 z-0"></div>

    <!-- Container Utama -->
    <div id="app" class="relative z-10 min-h-screen flex flex-col items-center justify-center p-4">
        <!-- Konten akan di-render di sini oleh JavaScript -->
    </div>

    <script>
        // --- DATA SOAL ---
        const QUESTIONS = [
            // --- UNIT 1 ---
            {
                id: 1, category: "Bilangan & Operasi", type: "single",
                question: "Hitunglah hasil dari operasi berikut: 8 + (-12)",
                options: [
                    { text: "20", isCorrect: false },
                    { text: "4", isCorrect: false },
                    { text: "-4", isCorrect: true },
                    { text: "-20", isCorrect: false }
                ]
            },
            {
                id: 2, category: "Bilangan & Operasi", type: "complex",
                question: "Manakah dari pernyataan berikut yang BENAR mengenai KPK dan FPB? (Pilih lebih dari satu)",
                options: [
                    { text: "KPK dari 6 dan 10 adalah 30", isCorrect: true },
                    { text: "FPB dari 24 dan 40 adalah 8", isCorrect: true },
                    { text: "KPK dari 6 dan 10 adalah 60", isCorrect: false },
                    { text: "FPB dari 24 dan 40 adalah 4", isCorrect: false }
                ]
            },
            {
                id: 3, category: "Bilangan & Operasi", type: "single",
                question: "Berapakah hasil dari ∛125 - ∛27 ?",
                options: [
                    { text: "2", isCorrect: true },
                    { text: "3", isCorrect: false },
                    { text: "5", isCorrect: false },
                    { text: "8", isCorrect: false }
                ]
            },
            {
                id: 4, category: "Bilangan & Operasi", type: "single",
                question: "Sebuah bilangan 3*58 habis dibagi 3. Angka berapakah yang mungkin menggantikan *?",
                options: [
                    { text: "1", isCorrect: false },
                    { text: "2", isCorrect: true },
                    { text: "3", isCorrect: false },
                    { text: "4", isCorrect: false }
                ]
            },
            {
                id: 5, category: "Bilangan & Operasi", type: "single",
                question: "Hasil kali dua bilangan bulat adalah -24. Jumlahnya adalah 5. Berapakah bilangan itu?",
                options: [
                    { text: "8 dan -3", isCorrect: true },
                    { text: "-8 dan 3", isCorrect: false },
                    { text: "6 dan -4", isCorrect: false },
                    { text: "12 dan -2", isCorrect: false }
                ]
            },
            {
                id: 6, category: "Bilangan & Operasi", type: "complex",
                question: "Diketahui 2²=4, 4²=16, 8²=64. Manakah pernyataan benar tentang 32²? (Pilih > 1)",
                options: [
                    { text: "Nilainya adalah 1024", isCorrect: true },
                    { text: "Nilainya sama dengan (2^5)²", isCorrect: true },
                    { text: "Nilainya adalah 900", isCorrect: false },
                    { text: "Nilainya lebih kecil dari 30²", isCorrect: false }
                ]
            },
            // --- UNIT 2 ---
            {
                id: 7, category: "Aljabar", type: "single",
                question: "Jika p = 3 dan q = 10, berapakah nilai 5q - 1?",
                options: [
                    { text: "14", isCorrect: false }, { text: "49", isCorrect: true },
                    { text: "51", isCorrect: false }, { text: "29", isCorrect: false }
                ]
            },
            {
                id: 8, category: "Aljabar", type: "single",
                question: "Sederhanakan: 4ab - 3ba + 7rs - 7sr",
                options: [
                    { text: "ab", isCorrect: true }, { text: "7ab + 14rs", isCorrect: false },
                    { text: "ab + 14rs", isCorrect: false }, { text: "7ab", isCorrect: false }
                ]
            },
            {
                id: 9, category: "Aljabar", type: "complex",
                question: "Manakah penyederhanaan yang BENAR? (Pilih > 1)",
                options: [
                    { text: "9p + p = 10p", isCorrect: true }, { text: "3x + 9 = 12x", isCorrect: false },
                    { text: "5(p - 2) = 5p - 10", isCorrect: true }, { text: "6p - 5p = 1", isCorrect: false }
                ]
            },
            {
                id: 10, category: "Aljabar", type: "single",
                question: "Selesaikan persamaan: x - 8 = 22",
                options: [
                    { text: "x = 14", isCorrect: false }, { text: "x = 30", isCorrect: true },
                    { text: "x = 176", isCorrect: false }, { text: "x = 2.75", isCorrect: false }
                ]
            },
            {
                id: 11, category: "Aljabar", type: "single",
                question: "Untuk n > 8, bilangan bulat TERKECIL yang memenuhi adalah?",
                options: [
                    { text: "8", isCorrect: false }, { text: "9", isCorrect: true },
                    { text: "7", isCorrect: false }, { text: "8.1", isCorrect: false }
                ]
            },
            {
                id: 12, category: "Aljabar", type: "single",
                question: "Sederhanakan pecahan: 3x/4 + 7x/12",
                options: [
                    { text: "10x/16", isCorrect: false }, { text: "4x/3", isCorrect: true },
                    { text: "10x/12", isCorrect: false }, { text: "x", isCorrect: false }
                ]
            },
            {
                id: 13, category: "Aljabar", type: "complex",
                question: "Manakah yang merupakan EKSPRESI (bukan persamaan)? (Pilih > 1)",
                options: [
                    { text: "3x + 9", isCorrect: true }, { text: "3x + 9 = 12", isCorrect: false },
                    { text: "4(d + 3r)", isCorrect: true }, { text: "x = 5", isCorrect: false }
                ]
            },
            {
                id: 14, category: "Aljabar", type: "single",
                question: "Segitiga sama kaki sisinya (4x - 7) cm. Jika panjangnya 25 cm, berapa x?",
                options: [
                    { text: "4.5", isCorrect: false }, { text: "8", isCorrect: true },
                    { text: "32", isCorrect: false }, { text: "18", isCorrect: false }
                ]
            },
            // --- UNIT 3 ---
            {
                id: 15, category: "Desimal & Nilai Tempat", type: "single",
                question: "Hitunglah: 35.8 × 10⁴",
                options: [
                    { text: "358.000", isCorrect: true }, { text: "3.580.000", isCorrect: false },
                    { text: "35.800", isCorrect: false }, { text: "0,00358", isCorrect: false }
                ]
            },
            {
                id: 16, category: "Desimal & Nilai Tempat", type: "single",
                question: "Hitunglah: 3210 ÷ 10⁴",
                options: [
                    { text: "32.100.000", isCorrect: false }, { text: "3,21", isCorrect: false },
                    { text: "0,321", isCorrect: true }, { text: "0,0321", isCorrect: false }
                ]
            },
            {
                id: 17, category: "Desimal & Nilai Tempat", type: "complex",
                question: "Manakah pembulatan yang BENAR? (Pilih > 1)",
                options: [
                    { text: "16,952 (2 desimal) = 16,95", isCorrect: true }, { text: "7,9986 (2 desimal) = 8,00", isCorrect: true },
                    { text: "813,0298 (3 desimal) = 813,029", isCorrect: false }, { text: "449,5678 (4 desimal) = 449,5680", isCorrect: false }
                ]
            },
            {
                id: 18, category: "Desimal & Nilai Tempat", type: "single",
                question: "Tuliskan 10.000.000 sebagai bilangan berpangkat basis 10.",
                options: [
                    { text: "10^6", isCorrect: false }, { text: "10^7", isCorrect: true },
                    { text: "10^8", isCorrect: false }, { text: "10^5", isCorrect: false }
                ]
            },
            {
                id: 19, category: "Desimal & Nilai Tempat", type: "complex",
                question: "Manakah pernyataan BENAR tentang perpangkatan 10? (Pilih > 1)",
                options: [
                    { text: "Membagi dengan 10² = geser koma 2 kiri", isCorrect: true },
                    { text: "54 × 10² = 5400", isCorrect: true },
                    { text: "10³ adalah seribu", isCorrect: true },
                    { text: "Mengalikan dengan 10³ bilangan jadi lebih kecil", isCorrect: false }
                ]
            },
            {
                id: 20, category: "Desimal & Nilai Tempat", type: "single",
                question: "Bulatkan 813,02981 ke 3 tempat desimal.",
                options: [
                    { text: "813,029", isCorrect: false }, { text: "813,030", isCorrect: true },
                    { text: "813,028", isCorrect: false }, { text: "813,03", isCorrect: false }
                ]
            }
        ];

        // --- STATE MANAJEMEN ---
        let state = {
            view: 'registration', // 'registration', 'quiz', 'result'
            student: { name: '', class: '', email: '' },
            qIndex: 0,
            answers: {} // { 1: [0], 2: [0, 2] }
        };

        const app = document.getElementById('app');

        // --- FUNGSI UTAMA ---
        function render() {
            // Animasi transisi konten
            app.innerHTML = ''; 
            
            if (state.view === 'registration') {
                renderRegistration();
            } else if (state.view === 'quiz') {
                renderQuiz();
            } else if (state.view === 'result') {
                renderResult();
            }
            
            // Render Icons
            lucide.createIcons();
        }

        // 1. TAMPILAN REGISTRASI (EYE-CATCHING)
        function renderRegistration() {
            app.innerHTML = `
                <div class="animate-fade-in w-full max-w-md">
                    <div class="glass-panel p-8 md:p-10 rounded-3xl shadow-2xl relative overflow-hidden">
                        <!-- Dekorasi Background -->
                        <div class="absolute -top-10 -right-10 w-32 h-32 bg-purple-200 rounded-full blur-3xl opacity-50"></div>
                        <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-blue-200 rounded-full blur-3xl opacity-50"></div>

                        <div class="text-center mb-10 relative z-10">
                            <div class="bg-gradient-to-br from-indigo-500 to-purple-600 w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg transform rotate-3 hover:rotate-6 transition-transform">
                                <i data-lucide="book-open" class="w-10 h-10 text-white"></i>
                            </div>
                            <h1 class="text-3xl font-bold text-gray-800 mb-2">Selamat Datang!</h1>
                            <p class="text-gray-500">Siap menguji kemampuan matematikamu?</p>
                        </div>

                        <form onsubmit="handleStart(event)" class="space-y-5 relative z-10">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2 ml-1">Nama Lengkap</label>
                                <input type="text" id="inputName" required class="w-full p-4 rounded-xl border-0 glass-input outline-none font-medium text-gray-700 placeholder-gray-400" placeholder="Ketik namamu di sini..." value="${state.student.name}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2 ml-1">Kelas</label>
                                <input type="text" id="inputClass" required class="w-full p-4 rounded-xl border-0 glass-input outline-none font-medium text-gray-700 placeholder-gray-400" placeholder="Contoh: 7A" value="${state.student.class}">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2 ml-1">Email (Opsional)</label>
                                <input type="email" id="inputEmail" class="w-full p-4 rounded-xl border-0 glass-input outline-none font-medium text-gray-700 placeholder-gray-400" placeholder="emailmu@sekolah.com" value="${state.student.email}">
                            </div>
                            
                            <button type="submit" class="w-full group relative flex items-center justify-center bg-gray-900 text-white font-bold py-4 px-6 rounded-xl mt-8 shadow-lg overflow-hidden transition-all hover:shadow-indigo-500/30 hover:-translate-y-1">
                                <div class="absolute inset-0 w-full h-full bg-gradient-to-r from-indigo-600 to-purple-600 opacity-100 group-hover:opacity-90 transition-opacity"></div>
                                <span class="relative flex items-center">
                                    Mulai Mengerjakan <i data-lucide="arrow-right" class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"></i>
                                </span>
                            </button>
                        </form>
                    </div>
                    <p class="text-center text-white/60 text-sm mt-6">© 2025 Math Quiz App. Dikembangkan dengan Gemini AI oleh Abdul Rahman, S.Pd., M.Pd.</p>
                </div>
            `;
        }

        function handleStart(e) {
            e.preventDefault();
            const name = document.getElementById('inputName').value;
            const className = document.getElementById('inputClass').value;
            const email = document.getElementById('inputEmail').value;

            if (name && className) {
                state.student = { name, class: className, email };
                state.view = 'quiz';
                render();
            }
        }

        // 2. TAMPILAN KUIS (EYE-CATCHING)
        function renderQuiz() {
            const q = QUESTIONS[state.qIndex];
            const userAns = state.answers[q.id] || [];
            const progress = ((state.qIndex + 1) / QUESTIONS.length) * 100;

            const optionsHtml = q.options.map((opt, idx) => {
                const isSelected = userAns.includes(idx);
                // Styles untuk pilihan jawaban
                const containerClass = isSelected 
                    ? 'border-indigo-500 bg-indigo-50/80 shadow-md transform scale-[1.01]' 
                    : 'border-transparent bg-gray-50 hover:bg-white hover:border-gray-200 hover:shadow-sm';
                
                const textClass = isSelected ? 'text-indigo-900 font-semibold' : 'text-gray-600 font-medium';
                
                const indicatorClass = isSelected 
                    ? 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white border-transparent' 
                    : 'bg-white border-gray-300 text-transparent';

                return `
                <button onclick="handleOptionSelect(${q.id}, ${idx}, '${q.type}')" 
                    class="w-full text-left p-4 md:p-5 rounded-2xl border-2 transition-all duration-200 flex items-center group mb-3 ${containerClass}">
                    <div class="w-7 h-7 flex-shrink-0 rounded-lg flex items-center justify-center mr-4 border-2 transition-colors ${indicatorClass} ${q.type === 'single' ? 'rounded-full' : 'rounded-lg'}">
                        <i data-lucide="check" class="w-4 h-4 stroke-[3]"></i>
                    </div>
                    <span class="${textClass} text-base md:text-lg">${opt.text}</span>
                </button>`;
            }).join('');

            app.innerHTML = `
                <div class="animate-fade-in max-w-4xl mx-auto w-full flex-grow flex flex-col">
                    <!-- Header Info -->
                    <div class="flex justify-between items-center mb-6 px-2">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center border border-white/30 text-white font-bold text-lg">
                                ${state.student.name.charAt(0).toUpperCase()}
                            </div>
                            <div class="text-white">
                                <p class="text-xs opacity-80 uppercase tracking-wider font-semibold">Siswa</p>
                                <p class="text-sm font-medium truncate max-w-[150px]">${state.student.name}</p>
                            </div>
                        </div>
                        <div class="glass-panel px-4 py-2 rounded-full flex items-center gap-2">
                            <i data-lucide="target" class="w-4 h-4 text-purple-600"></i>
                            <span class="text-sm font-bold text-purple-900">Soal ${state.qIndex + 1} <span class="text-gray-400 font-normal">/ ${QUESTIONS.length}</span></span>
                        </div>
                    </div>

                    <!-- Main Card -->
                    <div class="glass-panel rounded-3xl p-6 md:p-10 shadow-2xl flex-grow flex flex-col relative overflow-hidden">
                        <!-- Progress Bar Atas -->
                        <div class="absolute top-0 left-0 w-full h-1.5 bg-gray-100">
                            <div class="h-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 transition-all duration-500 ease-out shadow-[0_0_10px_rgba(168,85,247,0.5)]" style="width: ${progress}%"></div>
                        </div>

                        <div class="mb-6 mt-2">
                            <div class="flex flex-wrap items-center gap-2 mb-4">
                                <span class="px-3 py-1 text-xs font-bold rounded-lg uppercase tracking-wide ${q.type === 'complex' ? 'bg-purple-100 text-purple-700 border border-purple-200' : 'bg-blue-100 text-blue-700 border border-blue-200'}">
                                    ${q.type === 'complex' ? 'Pilihan Ganda Kompleks' : 'Pilihan Ganda Tunggal'}
                                </span>
                                <span class="px-3 py-1 text-xs font-bold bg-gray-100 text-gray-600 border border-gray-200 rounded-lg uppercase tracking-wide">
                                    ${q.category}
                                </span>
                            </div>

                            <h3 class="text-xl md:text-2xl font-bold text-gray-800 leading-snug">${q.question}</h3>
                            ${q.type === 'complex' ? '<p class="text-sm text-purple-600 mt-2 font-medium flex items-center"><i data-lucide="info" class="w-4 h-4 mr-1"></i> Pilih lebih dari satu jawaban yang benar</p>' : ''}
                        </div>

                        <div class="flex-grow space-y-3">
                            ${optionsHtml}
                        </div>

                        <!-- Navigation Buttons -->
                        <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-100">
                            <button onclick="changeQuestion(-1)" ${state.qIndex === 0 ? 'disabled class="opacity-0 pointer-events-none"' : 'class="group flex items-center px-5 py-3 rounded-xl text-gray-500 font-semibold hover:bg-gray-100 transition-colors"'} >
                                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-3 group-hover:bg-white group-hover:shadow-sm transition-all">
                                    <i data-lucide="chevron-left" class="w-5 h-5 text-gray-600"></i>
                                </div>
                                Sebelumnya
                            </button>

                            ${state.qIndex === QUESTIONS.length - 1 
                                ? `<button onclick="finishQuiz()" class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-green-500/40 hover:-translate-y-1 transition-all flex items-center">
                                    Selesai & Cek Skor <i data-lucide="check-circle" class="w-5 h-5 ml-2"></i>
                                   </button>`
                                : `<button onclick="changeQuestion(1)" class="bg-gray-900 text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all flex items-center group">
                                    Selanjutnya
                                    <div class="ml-3 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition-colors">
                                        <i data-lucide="chevron-right" class="w-4 h-4"></i>
                                    </div>
                                   </button>`
                            }
                        </div>
                    </div>
                </div>
            `;
        }

        function handleOptionSelect(qId, optIdx, type) {
            let current = state.answers[qId] || [];
            if (type === 'single') {
                state.answers[qId] = [optIdx];
            } else {
                if (current.includes(optIdx)) {
                    state.answers[qId] = current.filter(i => i !== optIdx);
                } else {
                    state.answers[qId] = [...current, optIdx];
                }
            }
            renderQuiz(); 
            lucide.createIcons();
        }

        function changeQuestion(delta) {
            const newIndex = state.qIndex + delta;
            if (newIndex >= 0 && newIndex < QUESTIONS.length) {
                state.qIndex = newIndex;
                renderQuiz();
                lucide.createIcons();
            }
        }

        function finishQuiz() {
            state.view = 'result';
            render();
        }

        // 3. TAMPILAN HASIL (EYE-CATCHING)
        function renderResult() {
            // Logic Kalkulasi (Sama seperti sebelumnya)
            let totalScore = 0;
            let catScores = {};

            QUESTIONS.forEach(q => {
                if (!catScores[q.category]) catScores[q.category] = { correct: 0, total: 0 };
                catScores[q.category].total++;

                const userAns = state.answers[q.id] || [];
                let isCorrect = false;

                if (q.type === 'single') {
                    if (userAns.length > 0 && q.options[userAns[0]].isCorrect) isCorrect = true;
                } else {
                    const correctIndices = q.options.map((o, i) => o.isCorrect ? i : -1).filter(i => i !== -1);
                    const sortedUser = [...userAns].sort();
                    const allCorrect = correctIndices.every(i => sortedUser.includes(i));
                    const noWrong = sortedUser.every(i => correctIndices.includes(i));
                    if (allCorrect && noWrong && correctIndices.length === sortedUser.length) isCorrect = true;
                }

                if (isCorrect) {
                    totalScore++;
                    catScores[q.category].correct++;
                }
            });

            const percent = Math.round((totalScore / QUESTIONS.length) * 100);
            
            // Generate List
            let strengths = [], weaknesses = [];
            for (let cat in catScores) {
                const s = catScores[cat];
                const p = Math.round((s.correct / s.total) * 100);
                const text = `<span class="font-medium">${cat}</span> <span class="opacity-70 text-xs ml-1">(${p}%)</span>`;
                if (p >= 70) strengths.push(text);
                else weaknesses.push(text);
            }

            const strengthHtml = strengths.length 
                ? `<ul class="space-y-2 mt-3">${strengths.map(s => `<li class="flex items-start text-sm text-gray-700"><i data-lucide="check" class="w-4 h-4 text-green-500 mr-2 mt-0.5"></i> ${s}</li>`).join('')}</ul>` 
                : '<p class="text-sm italic text-gray-500 mt-2">Terus berlatih ya!</p>';
            
            const weaknessHtml = weaknesses.length 
                ? `<ul class="space-y-2 mt-3">${weaknesses.map(w => `<li class="flex items-start text-sm text-gray-700"><i data-lucide="arrow-up-circle" class="w-4 h-4 text-orange-500 mr-2 mt-0.5"></i> ${w}</li>`).join('')}</ul>` 
                : '<p class="text-sm italic text-gray-500 mt-2">Kerja bagus, pertahankan!</p>';

            // Render
            app.innerHTML = `
                <div class="animate-fade-in w-full max-w-2xl">
                    <div class="glass-panel rounded-3xl overflow-hidden shadow-2xl">
                        <!-- Header Hasil -->
                        <div class="bg-gradient-to-r from-indigo-600 to-purple-700 p-8 text-white text-center relative overflow-hidden">
                            <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
                            
                            <h2 class="text-2xl font-bold mb-1 relative z-10">Laporan Hasil Evaluasi</h2>
                            <div class="flex items-center justify-center gap-2 text-indigo-100 text-sm relative z-10">
                                <span class="bg-white/10 px-3 py-1 rounded-full backdrop-blur-sm">${state.student.name}</span>
                                <span class="bg-white/10 px-3 py-1 rounded-full backdrop-blur-sm">${state.student.class}</span>
                            </div>

                            <div class="mt-8 mb-4 relative z-10 flex justify-center">
                                <div class="relative w-40 h-40">
                                    <!-- Lingkaran Luar -->
                                    <svg class="w-full h-full transform -rotate-90">
                                        <circle cx="80" cy="80" r="70" stroke="currentColor" stroke-width="12" fill="transparent" class="text-white/20" />
                                        <circle cx="80" cy="80" r="70" stroke="currentColor" stroke-width="12" fill="transparent" 
                                            stroke-dasharray="440" stroke-dashoffset="${440 - (440 * percent / 100)}" 
                                            class="text-white transition-all duration-1000 ease-out" />
                                    </svg>
                                    <div class="absolute inset-0 flex flex-col items-center justify-center">
                                        <span class="text-5xl font-bold">${percent}%</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-lg font-medium text-indigo-100">Skor Benar: ${totalScore} dari ${QUESTIONS.length}</p>
                        </div>
                        
                        <!-- Body Hasil -->
                        <div class="p-8 bg-white/60">
                            <div class="grid md:grid-cols-2 gap-6 mb-8">
                                <div class="bg-green-50/80 p-5 rounded-2xl border border-green-100 shadow-sm">
                                    <div class="flex items-center mb-1 text-green-700 font-bold">
                                        <div class="p-1.5 bg-green-200 rounded-lg mr-2"><i data-lucide="award" class="w-5 h-5"></i></div>
                                        Perlu Dipertahankan
                                    </div>
                                    ${strengthHtml}
                                </div>
                                <div class="bg-orange-50/80 p-5 rounded-2xl border border-orange-100 shadow-sm">
                                    <div class="flex items-center mb-1 text-orange-700 font-bold">
                                        <div class="p-1.5 bg-orange-200 rounded-lg mr-2"><i data-lucide="zap" class="w-5 h-5"></i></div>
                                        Perlu Diperkuat
                                    </div>
                                    ${weaknessHtml}
                                </div>
                            </div>

                            <button onclick="resetApp()" class="w-full py-4 bg-gray-900 text-white font-bold rounded-xl flex items-center justify-center shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all group">
                                <i data-lucide="rotate-ccw" class="w-5 h-5 mr-2 group-hover:-rotate-180 transition-transform duration-500"></i> Kerjakan Ulang
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function resetApp() {
            state.view = 'registration';
            state.student = { name: '', class: '', email: '' };
            state.qIndex = 0;
            state.answers = {};
            render();
        }

        // Init First Render
        render();

    </script>
</body>
</html>
